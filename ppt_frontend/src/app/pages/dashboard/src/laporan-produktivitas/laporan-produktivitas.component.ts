import { Component } from "@angular/core";
import * as L from "leaflet";

@Component({
  selector: "app-laporan-produktivitas",
  templateUrl: "./laporan-produktivitas.component.html",
  styleUrls: ["./laporan-produktivitas.component.scss"]
})
export class LaporanProduktivitasComponent {
  jsonData = [
    {
      "nip_reporter": "196602031996012001",
      "nm_reporter": "Ecin Kuraesin",
      "tgl_lapor": "2023-10-12 08:18:24",
      "tgl_kunjungan": "2023-10-10",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "DARMARAJA",
      "nm_desa": "DARMAJAYA",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "7.70",
      "lat": "-6.92511175",
      "lng": "108.06615447",
      "photos": "[\"\\/uploads\\/posts\\/231012-3897-671288295.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "197604162008011003",
      "nm_reporter": "SAMARIH, SIP",
      "tgl_lapor": "2023-10-11 14:02:36",
      "tgl_kunjungan": "2023-10-11",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "INDRAMAYU",
      "nm_kec": "KANDANGHAUR",
      "nm_desa": "ILIR",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "6.40",
      "lat": "-6.37027920",
      "lng": "108.06973730",
      "photos": "[\"\\/uploads\\/posts\\/231011-965-330756175.jpg\"]",
      "nm_verifikator": "Sunano",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "197604162008011003",
      "nm_reporter": "SAMARIH, SIP",
      "tgl_lapor": "2023-10-11 14:01:19",
      "tgl_kunjungan": "2023-10-11",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "INDRAMAYU",
      "nm_kec": "KANDANGHAUR",
      "nm_desa": "CURUG",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "6.80",
      "lat": "-6.37027810",
      "lng": "108.06973670",
      "photos": "[\"\\/uploads\\/posts\\/231011-965-126567639.jpg\"]",
      "nm_verifikator": "Sunano",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "19680515 200701 1 023",
      "nm_reporter": "Adis",
      "tgl_lapor": "2023-10-10 11:37:03",
      "tgl_kunjungan": "2023-06-20",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "SITURAJA",
      "nm_desa": "CICARIMANAH",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "6.11",
      "lat": "-6.87565130",
      "lng": "107.99736730",
      "photos": "[\"\\/uploads\\/posts\\/231010-5853-349940721.jpg\"]",
      "nm_verifikator": "Lia Rismawati",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "19680515 200701 1 023",
      "nm_reporter": "Adis",
      "tgl_lapor": "2023-10-10 11:31:26",
      "tgl_kunjungan": "2023-06-23",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "SITURAJA",
      "nm_desa": "PAMULIHAN",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "6.13",
      "lat": "-6.84910960",
      "lng": "108.01457790",
      "photos": "[\"\\/uploads\\/posts\\/231010-5853-737342497.jpg\"]",
      "nm_verifikator": "Lia Rismawati",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "19680515 200701 1 023",
      "nm_reporter": "Adis",
      "tgl_lapor": "2023-10-10 11:23:45",
      "tgl_kunjungan": "2023-06-19",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "SITURAJA",
      "nm_desa": "BANGBAYANG",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "6.11",
      "lat": "-6.85585880",
      "lng": "108.01773810",
      "photos": "[\"\\/uploads\\/posts\\/231010-5853-201953725.jpg\"]",
      "nm_verifikator": "Lia Rismawati",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "19680515 200701 1 023",
      "nm_reporter": "Adis",
      "tgl_lapor": "2023-10-10 11:15:09",
      "tgl_kunjungan": "2023-06-26",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "SITURAJA",
      "nm_desa": "KADUWULUNG",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "6.16",
      "lat": "-6.86058740",
      "lng": "108.01476710",
      "photos": "[\"\\/uploads\\/posts\\/231010-5853-394407170.jpg\"]",
      "nm_verifikator": "Lia Rismawati",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "19680515 200701 1 023",
      "nm_reporter": "Adis",
      "tgl_lapor": "2023-10-10 11:10:00",
      "tgl_kunjungan": "2023-06-20",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "SITURAJA",
      "nm_desa": "KARANGHEULEUT",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "6.19",
      "lat": "-6.87049360",
      "lng": "108.00131740",
      "photos": "[\"\\/uploads\\/posts\\/231010-5853-253467429.jpg\"]",
      "nm_verifikator": "Lia Rismawati",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "19680515 200701 1 023",
      "nm_reporter": "Adis",
      "tgl_lapor": "2023-10-10 10:30:05",
      "tgl_kunjungan": "2023-07-13",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "SITURAJA",
      "nm_desa": "CIKADU",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "6.22",
      "lat": "-6.84723490",
      "lng": "108.01353250",
      "photos": "[\"\\/uploads\\/posts\\/231010-5853-666666046.jpg\"]",
      "nm_verifikator": "Lia Rismawati",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "19680515 200701 1 023",
      "nm_reporter": "Adis",
      "tgl_lapor": "2023-10-10 10:23:48",
      "tgl_kunjungan": "2023-09-04",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "SITURAJA",
      "nm_desa": "MEKARMULYA",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "6.28",
      "lat": "-6.68531570",
      "lng": "107.90177860",
      "photos": "[\"\\/uploads\\/posts\\/231010-5853-129164925.jpg\"]",
      "nm_verifikator": "Lia Rismawati",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "19680515 200701 1 023",
      "nm_reporter": "Adis",
      "tgl_lapor": "2023-10-09 22:15:32",
      "tgl_kunjungan": "2023-07-13",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "SITURAJA",
      "nm_desa": "AMBIT",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "6.27",
      "lat": "-6.85180260",
      "lng": "108.01404360",
      "photos": "[\"\\/uploads\\/posts\\/231009-5853-516206149.jpg\"]",
      "nm_verifikator": "Lia Rismawati",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "19680515 200701 1 023",
      "nm_reporter": "Adis",
      "tgl_lapor": "2023-10-09 22:09:37",
      "tgl_kunjungan": "2023-07-13",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "SITURAJA",
      "nm_desa": "CIJELER",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "6.33",
      "lat": "-6.85245720",
      "lng": "108.01386360",
      "photos": "[\"\\/uploads\\/posts\\/231009-5853-856009411.jpg\"]",
      "nm_verifikator": "Lia Rismawati",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "19680515 200701 1 023",
      "nm_reporter": "Adis",
      "tgl_lapor": "2023-10-09 22:02:24",
      "tgl_kunjungan": "2023-07-13",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "SITURAJA",
      "nm_desa": "JATIMEKAR",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "6.21",
      "lat": "-6.85166570",
      "lng": "108.01421150",
      "photos": "[\"\\/uploads\\/posts\\/231009-5853-694872617.jpg\"]",
      "nm_verifikator": "Lia Rismawati",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "19680515 200701 1 023",
      "nm_reporter": "Adis",
      "tgl_lapor": "2023-10-09 21:57:53",
      "tgl_kunjungan": "2023-10-04",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "SITURAJA",
      "nm_desa": "CIJATI",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "6.21",
      "lat": "-6.67989670",
      "lng": "107.90039220",
      "photos": "[\"\\/uploads\\/posts\\/231009-5853-593470478.jpg\"]",
      "nm_verifikator": "Lia Rismawati",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "19680515 200701 1 023",
      "nm_reporter": "Adis",
      "tgl_lapor": "2023-10-09 21:53:36",
      "tgl_kunjungan": "2023-06-27",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "SITURAJA",
      "nm_desa": "MALAKA",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "6.31",
      "lat": "-6.84939500",
      "lng": "108.02169950",
      "photos": "[\"\\/uploads\\/posts\\/231009-5853-661126830.jpg\"]",
      "nm_verifikator": "Lia Rismawati",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "19680515 200701 1 023",
      "nm_reporter": "Adis",
      "tgl_lapor": "2023-10-09 21:48:00",
      "tgl_kunjungan": "2023-10-09",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "SITURAJA",
      "nm_desa": "SITURAJA UTARA",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "6.28",
      "lat": "-6.68131410",
      "lng": "107.90109780",
      "photos": "[\"\\/uploads\\/posts\\/231009-5853-522669333.jpg\"]",
      "nm_verifikator": "Lia Rismawati",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "19680515 200701 1 023",
      "nm_reporter": "Adis",
      "tgl_lapor": "2023-10-09 21:42:35",
      "tgl_kunjungan": "2023-10-09",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "SITURAJA",
      "nm_desa": "SITURAJA",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "6.26",
      "lat": "-6.82953140",
      "lng": "108.01567550",
      "photos": "[\"\\/uploads\\/posts\\/231009-5853-126130384.jpg\"]",
      "nm_verifikator": "Lia Rismawati",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "197103062014121002",
      "nm_reporter": "Heru Amarudin SP",
      "tgl_lapor": "2023-10-09 09:40:43",
      "tgl_kunjungan": "2023-10-05",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "PURWAKARTA",
      "nm_kec": "PASAWAHAN",
      "nm_desa": "SAWAH KULON",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "5.60",
      "lat": "-6.58623886",
      "lng": "107.46386717",
      "photos": "[\"\\/uploads\\/posts\\/231009-12020-943433279.jpg\"]",
      "nm_verifikator": "Vinny Ayuningtyas",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "19770915 200812 1 001",
      "nm_reporter": "MAD ANWAR, SP, MP",
      "tgl_lapor": "2023-10-06 10:39:51",
      "tgl_kunjungan": "2023-10-06",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUBANG",
      "nm_kec": "CIASEM",
      "nm_desa": "CIASEM GIRANG",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "7.74",
      "lat": "-6.55327850",
      "lng": "107.76249680",
      "photos": "[\"\\/uploads\\/posts\\/231006-1402-118768262.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19770915 200812 1 001",
      "nm_reporter": "MAD ANWAR, SP, MP",
      "tgl_lapor": "2023-10-06 10:18:15",
      "tgl_kunjungan": "2023-10-05",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUBANG",
      "nm_kec": "CIASEM",
      "nm_desa": "DUKUH",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "8.95",
      "lat": "-6.28687120",
      "lng": "107.81809200",
      "photos": "[\"\\/uploads\\/posts\\/231006-1402-492505982.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19770915 200812 1 001",
      "nm_reporter": "MAD ANWAR, SP, MP",
      "tgl_lapor": "2023-10-05 14:27:45",
      "tgl_kunjungan": "2023-10-05",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUBANG",
      "nm_kec": "CIASEM",
      "nm_desa": "CIASEM GIRANG",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "8.60",
      "lat": "-6.28670750",
      "lng": "107.81812110",
      "photos": "[\"\\/uploads\\/posts\\/231005-1402-278107186.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19770915 200812 1 001",
      "nm_reporter": "MAD ANWAR, SP, MP",
      "tgl_lapor": "2023-10-05 10:17:01",
      "tgl_kunjungan": "2023-10-05",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUBANG",
      "nm_kec": "CIASEM",
      "nm_desa": "DUKUH",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "10.28",
      "lat": "-6.34541330",
      "lng": "107.72684110",
      "photos": "[\"\\/uploads\\/posts\\/231005-1402-933460476.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19770915 200812 1 001",
      "nm_reporter": "MAD ANWAR, SP, MP",
      "tgl_lapor": "2023-10-05 10:11:05",
      "tgl_kunjungan": "2023-10-05",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUBANG",
      "nm_kec": "CIASEM",
      "nm_desa": "JATIBARU",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "8.32",
      "lat": "-6.34556610",
      "lng": "107.72679550",
      "photos": "[\"\\/uploads\\/posts\\/231005-1402-388091920.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19770915 200812 1 001",
      "nm_reporter": "MAD ANWAR, SP, MP",
      "tgl_lapor": "2023-10-05 08:04:52",
      "tgl_kunjungan": "2023-10-05",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUBANG",
      "nm_kec": "CIASEM",
      "nm_desa": "DUKUH",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "8.40",
      "lat": "-6.28677150",
      "lng": "107.81806040",
      "photos": "[\"\\/uploads\\/posts\\/231005-1402-702674815.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19770915 200812 1 001",
      "nm_reporter": "MAD ANWAR, SP, MP",
      "tgl_lapor": "2023-10-05 07:59:37",
      "tgl_kunjungan": "2023-10-05",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUBANG",
      "nm_kec": "CIASEM",
      "nm_desa": "SUKAMANDIJAYA",
      "kategori_lahan": "Lahan Sawah",
      "jenis_lahan": "Sawah Irigasi",
      "jenis_tanaman_pangan": "Padi",
      "teknik_pengukuran": "Ubinan Kota/Kab",
      "jumlah": "980.00",
      "lat": "-6.28677940",
      "lng": "107.81806340",
      "photos": "[\"\\/uploads\\/posts\\/231005-1402-823476988.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  }
  ];
  constructor() {}

  ngOnInit(): void {
    const iconDefault = L.icon({
      iconUrl: "assets/images/leaflet/marker-icon.png",
      iconRetinaUrl: "assets/images/leaflet/marker-icon.png",
      shadowUrl: "assets/images/leaflet/marker-shadow.png"
    });

    const map = L.map("map").setView([-7.186391619934192, 108.3667705731445], 9);
    L.Marker.prototype.options.icon = iconDefault;

    L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: "&copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors"
    }).addTo(map);

    this.jsonData.forEach(item => {
      const popupContent = `
        <b>Tanggal Lapor:</b> ${item.tgl_lapor}<br>
        <b>Tanggal Kunjungan:</b> ${item.tgl_kunjungan}<br>
        <b>Provinsi:</b> ${item.nm_prov}<br>
        <b>Kabupaten:</b> ${item.nm_kab}<br>
        <b>Kecamatan:</b> ${item.nm_kec}<br>
        <b>Desa:</b> ${item.nm_desa}<br>
        <b>Kategori Lahan:</b> ${item.kategori_lahan}<br>
        <b>Jenis Lahan:</b> ${item.jenis_lahan}<br>
        <b>Jenis Tanaman Pangan:</b> ${item.jenis_tanaman_pangan}<br>
        <b>Teknik Pengukuran:</b> ${item.teknik_pengukuran}<br>
        <b>Jumlah:</b> ${item.jumlah}<br>
        <b>Status:</b> ${item.status}<br>
      `;
      const latitude = parseFloat(item.lat);
      const longitude = parseFloat(item.lng);

      L.marker([latitude, longitude])
        .addTo(map)
        .bindPopup(popupContent)
        .openPopup();
    });
  }
}

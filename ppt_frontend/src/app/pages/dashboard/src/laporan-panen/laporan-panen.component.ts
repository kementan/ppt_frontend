import { Component } from "@angular/core";
import * as L from "leaflet";

@Component({
  selector: "app-laporan-panen",
  templateUrl: "./laporan-panen.component.html",
  styleUrls: ["./laporan-panen.component.scss"]
})
export class LaporanPanenComponent {
  jsonData = [
    {
      "nip_reporter": "THL TBPP",
      "nm_reporter": "Asep Tirna, SP.",
      "tgl_lapor": "2023-10-13 07:46:59",
      "tgl_kunjungan": "2023-10-12",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "TASIKMALAYA",
      "nm_kec": "CULAMEGA",
      "nm_desa": "CIPICUNG",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Ciherang",
      "kategori_pengelola": "Gapoktan",
      "nama_pengelola": "Sejahtera",
      "luas": "100.00",
      "perkiraan": "6.00",
      "lat": "-7.56635525",
      "lng": "108.03778075",
      "photos": "[\"\\/uploads\\/posts\\/231013-1231-864378548.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19731231 201411 2 003",
      "nm_reporter": "Rustika Suliyanti",
      "tgl_lapor": "2023-10-12 21:05:40",
      "tgl_kunjungan": "2023-08-26",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "TASIKMALAYA",
      "nm_kec": "PADAKEMBANG",
      "nm_desa": "PADAKEMBANG",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Lain-lain",
      "kategori_pengelola": "Gapoktan",
      "nama_pengelola": "Padakembang",
      "luas": "10.00",
      "perkiraan": "6.80",
      "lat": "-7.29534722",
      "lng": "108.11188417",
      "photos": "[\"\\/uploads\\/posts\\/231012-1224-665008279.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19731231 201411 2 003",
      "nm_reporter": "Rustika Suliyanti",
      "tgl_lapor": "2023-10-12 21:02:40",
      "tgl_kunjungan": "2023-08-26",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "TASIKMALAYA",
      "nm_kec": "PADAKEMBANG",
      "nm_desa": "MEKARJAYA",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Lain-lain",
      "kategori_pengelola": "Gapoktan",
      "nama_pengelola": "Mekarjaya",
      "luas": "8.00",
      "perkiraan": "6.80",
      "lat": "-7.30334944",
      "lng": "108.12968111",
      "photos": "[\"\\/uploads\\/posts\\/231012-1224-599571559.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19731231 201411 2 003",
      "nm_reporter": "Rustika Suliyanti",
      "tgl_lapor": "2023-10-12 20:58:25",
      "tgl_kunjungan": "2023-08-20",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "TASIKMALAYA",
      "nm_kec": "PADAKEMBANG",
      "nm_desa": "CISARUNI",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Lain-lain",
      "kategori_pengelola": "Kelompok Tani",
      "nama_pengelola": "saladah",
      "luas": "20.00",
      "perkiraan": "7.30",
      "lat": "-7.31871056",
      "lng": "108.12864611",
      "photos": "[\"\\/uploads\\/posts\\/231012-1224-899049571.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19731231 201411 2 003",
      "nm_reporter": "Rustika Suliyanti",
      "tgl_lapor": "2023-10-12 20:54:59",
      "tgl_kunjungan": "2023-08-26",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "TASIKMALAYA",
      "nm_kec": "PADAKEMBANG",
      "nm_desa": "CISARUNI",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Lain-lain",
      "kategori_pengelola": "Gapoktan",
      "nama_pengelola": "Tani mukti",
      "luas": "8.00",
      "perkiraan": "7.00",
      "lat": "-7.31108167",
      "lng": "108.11456917",
      "photos": "[\"\\/uploads\\/posts\\/231012-1224-656237695.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19731231 201411 2 003",
      "nm_reporter": "Rustika Suliyanti",
      "tgl_lapor": "2023-10-12 20:52:29",
      "tgl_kunjungan": "2023-08-25",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "TASIKMALAYA",
      "nm_kec": "PADAKEMBANG",
      "nm_desa": "RANCAPAKU",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Lain-lain",
      "kategori_pengelola": "Gapoktan",
      "nama_pengelola": "Rancage",
      "luas": "30.00",
      "perkiraan": "7.10",
      "lat": "-7.32016167",
      "lng": "108.13916000",
      "photos": "[\"\\/uploads\\/posts\\/231012-1224-790892715.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19731231 201411 2 003",
      "nm_reporter": "Rustika Suliyanti",
      "tgl_lapor": "2023-10-12 20:48:52",
      "tgl_kunjungan": "2023-08-26",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "TASIKMALAYA",
      "nm_kec": "PADAKEMBANG",
      "nm_desa": "CILAMPUNGHILIR",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Lain-lain",
      "kategori_pengelola": "Gapoktan",
      "nama_pengelola": "Cilampunghilir",
      "luas": "47.00",
      "perkiraan": "7.20",
      "lat": "-7.33041833",
      "lng": "108.12564194",
      "photos": "[\"\\/uploads\\/posts\\/231012-1224-112020009.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "THL",
      "nm_reporter": "Yeni",
      "tgl_lapor": "2023-10-12 19:58:49",
      "tgl_kunjungan": "2023-10-12",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "TANJUNGMEDAR",
      "nm_desa": "SUKAMUKTI",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Lain-lain",
      "kategori_pengelola": "Kelompok Tani",
      "nama_pengelola": "poktan ciranjang",
      "luas": "52.00",
      "perkiraan": "401.00",
      "lat": "-6.80836470",
      "lng": "107.88906610",
      "photos": "[\"\\/uploads\\/posts\\/231012-5852-915578368.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "THL",
      "nm_reporter": "Yeni",
      "tgl_lapor": "2023-10-12 19:39:19",
      "tgl_kunjungan": "2023-10-12",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "TANJUNGMEDAR",
      "nm_desa": "SUKAMUKTI",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Lain-lain",
      "kategori_pengelola": "Kelompok Tani",
      "nama_pengelola": "poktan mekarmukti",
      "luas": "34.00",
      "perkiraan": "263.00",
      "lat": "-6.80836480",
      "lng": "107.88906230",
      "photos": "[\"\\/uploads\\/posts\\/231012-5852-182976831.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "THL",
      "nm_reporter": "Feri Mahdan, S.P.",
      "tgl_lapor": "2023-10-12 18:40:01",
      "tgl_kunjungan": "2023-09-21",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "TASIKMALAYA",
      "nm_kec": "SALOPA",
      "nm_desa": "MULYASARI",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Lain-lain",
      "kategori_pengelola": "Gapoktan",
      "nama_pengelola": "Mulyasari",
      "luas": "73.00",
      "perkiraan": "6.00",
      "lat": "-7.52244994",
      "lng": "108.30247497",
      "photos": "[\"\\/uploads\\/posts\\/231012-1197-385332590.jpg\"]",
      "nm_verifikator": "Nandang Nurdin Latip",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "THL",
      "nm_reporter": "Feri Mahdan, S.P.",
      "tgl_lapor": "2023-10-12 18:37:47",
      "tgl_kunjungan": "2023-09-19",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "TASIKMALAYA",
      "nm_kec": "SALOPA",
      "nm_desa": "MANDALAHAYU",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Lain-lain",
      "kategori_pengelola": "Kelompok Tani",
      "nama_pengelola": "Cilegi",
      "luas": "10.00",
      "perkiraan": "6.50",
      "lat": "-7.52285814",
      "lng": "108.27278136",
      "photos": "[\"\\/uploads\\/posts\\/231012-1197-935263088.jpg\"]",
      "nm_verifikator": "Nandang Nurdin Latip",
      "status": "Telah Diverifikasi"
  },
  {
      "nip_reporter": "197710192010011002",
      "nm_reporter": "Komaludin Permana, S.P.",
      "tgl_lapor": "2023-10-12 16:32:03",
      "tgl_kunjungan": "2023-10-12",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "KOTA SUKABUMI",
      "nm_kec": "CIKOLE",
      "nm_desa": "SUBANGJAYA",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Lain-lain",
      "kategori_pengelola": "Kelompok Tani",
      "nama_pengelola": "Makmur Jaya",
      "luas": "8.00",
      "perkiraan": "6.20",
      "lat": "-6.90891978",
      "lng": "106.94628142",
      "photos": "[\"\\/uploads\\/posts\\/231012-3148-296023509.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19720425 200604 2 009",
      "nm_reporter": "Dede Rohayani, SP",
      "tgl_lapor": "2023-10-12 15:09:37",
      "tgl_kunjungan": "2023-10-09",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "CISITU",
      "nm_desa": "PAJAGAN",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Inpari IR Nutrizinc",
      "kategori_pengelola": "Kelompok Tani",
      "nama_pengelola": "Sudapati",
      "luas": "5.00",
      "perkiraan": "7.73",
      "lat": "-6.84904600",
      "lng": "108.08765900",
      "photos": "[\"\\/uploads\\/posts\\/231012-3911-459161081.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19720425 200604 2 009",
      "nm_reporter": "Dede Rohayani, SP",
      "tgl_lapor": "2023-10-12 15:06:27",
      "tgl_kunjungan": "2023-10-09",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "CISITU",
      "nm_desa": "CILOPANG",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Inpari IR Nutrizinc",
      "kategori_pengelola": "Kelompok Tani",
      "nama_pengelola": "Ciminten",
      "luas": "5.00",
      "perkiraan": "7.74",
      "lat": "-6.84196803",
      "lng": "108.05212400",
      "photos": "[\"\\/uploads\\/posts\\/231012-3911-162735828.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19720425 200604 2 009",
      "nm_reporter": "Dede Rohayani, SP",
      "tgl_lapor": "2023-10-12 15:03:55",
      "tgl_kunjungan": "2023-10-09",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "CISITU",
      "nm_desa": "RANJENG",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Lain-lain",
      "kategori_pengelola": "Kelompok Tani",
      "nama_pengelola": "Sugih mukti",
      "luas": "7.00",
      "perkiraan": "7.79",
      "lat": "-6.85136983",
      "lng": "108.04930875",
      "photos": "[\"\\/uploads\\/posts\\/231012-3911-715292842.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19720425 200604 2 009",
      "nm_reporter": "Dede Rohayani, SP",
      "tgl_lapor": "2023-10-12 15:00:27",
      "tgl_kunjungan": "2023-10-07",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "CISITU",
      "nm_desa": "SUNDAMEKAR",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "IR 64",
      "kategori_pengelola": "Kelompok Tani",
      "nama_pengelola": "Cijunti",
      "luas": "7.00",
      "perkiraan": "7.75",
      "lat": "-6.87076972",
      "lng": "108.02561278",
      "photos": "[\"\\/uploads\\/posts\\/231012-3911-660340288.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "19720425 200604 2 009",
      "nm_reporter": "Dede Rohayani, SP",
      "tgl_lapor": "2023-10-12 14:56:59",
      "tgl_kunjungan": "2023-10-05",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "CISITU",
      "nm_desa": "CIGINTUNG",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Inpari 32 HDB",
      "kategori_pengelola": "Kelompok Tani",
      "nama_pengelola": "Mekar mukti",
      "luas": "11.00",
      "perkiraan": "7.74",
      "lat": "-6.86212100",
      "lng": "108.04928400",
      "photos": "[\"\\/uploads\\/posts\\/231012-3911-151631143.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "THL",
      "nm_reporter": "Ari Sriwibowo, STP.",
      "tgl_lapor": "2023-10-12 12:26:15",
      "tgl_kunjungan": "2023-08-31",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "TASIKMALAYA",
      "nm_kec": "JAMANIS",
      "nm_desa": "GERESIK",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Lain-lain",
      "kategori_pengelola": "Gapoktan",
      "nama_pengelola": "Citra Lestari",
      "luas": "12.00",
      "perkiraan": "6.80",
      "lat": "-7.18028336",
      "lng": "108.14913919",
      "photos": "[\"\\/uploads\\/posts\\/231012-1264-434046070.jpeg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "THL",
      "nm_reporter": "Ari Sriwibowo, STP.",
      "tgl_lapor": "2023-10-12 12:24:20",
      "tgl_kunjungan": "2023-08-30",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "TASIKMALAYA",
      "nm_kec": "JAMANIS",
      "nm_desa": "KARANGRESIK",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Lain-lain",
      "kategori_pengelola": "Gapoktan",
      "nama_pengelola": "Bina Sejahtera",
      "luas": "5.00",
      "perkiraan": "6.70",
      "lat": "-7.17990583",
      "lng": "108.16559481",
      "photos": "[\"\\/uploads\\/posts\\/231012-1264-338033034.jpeg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "THL",
      "nm_reporter": "Ari Sriwibowo, STP.",
      "tgl_lapor": "2023-10-12 12:22:36",
      "tgl_kunjungan": "2023-08-31",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "TASIKMALAYA",
      "nm_kec": "JAMANIS",
      "nm_desa": "KARANGMULYA",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Lain-lain",
      "kategori_pengelola": "Gapoktan",
      "nama_pengelola": "Arga Mulya",
      "luas": "15.00",
      "perkiraan": "6.80",
      "lat": "-7.18440486",
      "lng": "108.15819403",
      "photos": "[\"\\/uploads\\/posts\\/231012-1264-920232199.jpeg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "196806212009011001",
      "nm_reporter": "Aca sukarsa",
      "tgl_lapor": "2023-10-12 12:11:00",
      "tgl_kunjungan": "2023-10-12",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "JATINUNGGAL",
      "nm_desa": "SIRNASARI",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Inpari IR Nutrizinc",
      "kategori_pengelola": "Kelompok Tani",
      "nama_pengelola": "Pusaka Tani Makmur",
      "luas": "15.00",
      "perkiraan": "7.52",
      "lat": "-6.94770460",
      "lng": "108.12613540",
      "photos": "[\"\\/uploads\\/posts\\/231012-3899-547687371.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "196806212009011001",
      "nm_reporter": "Aca sukarsa",
      "tgl_lapor": "2023-10-12 12:08:31",
      "tgl_kunjungan": "2023-10-12",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "JATINUNGGAL",
      "nm_desa": "TARIKOLOT",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Inpari IR Nutrizinc",
      "kategori_pengelola": "Kelompok Tani",
      "nama_pengelola": "Cilanggok",
      "luas": "20.00",
      "perkiraan": "7.55",
      "lat": "-6.94757770",
      "lng": "108.12587710",
      "photos": "[\"\\/uploads\\/posts\\/231012-3899-514169636.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "196806212009011001",
      "nm_reporter": "Aca sukarsa",
      "tgl_lapor": "2023-10-12 12:06:40",
      "tgl_kunjungan": "2023-10-12",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "JATINUNGGAL",
      "nm_desa": "TARIKOLOT",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Inpari IR Nutrizinc",
      "kategori_pengelola": "Kelompok Tani",
      "nama_pengelola": "Kahuripan",
      "luas": "20.00",
      "perkiraan": "7.55",
      "lat": "-6.94736150",
      "lng": "108.12582340",
      "photos": "[\"\\/uploads\\/posts\\/231012-3899-777940904.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "196806212009011001",
      "nm_reporter": "Aca sukarsa",
      "tgl_lapor": "2023-10-12 12:04:27",
      "tgl_kunjungan": "2023-10-12",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "JATINUNGGAL",
      "nm_desa": "TARIKOLOT",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Inpari IR Nutrizinc",
      "kategori_pengelola": "Kelompok Tani",
      "nama_pengelola": "Simpati",
      "luas": "20.00",
      "perkiraan": "7.55",
      "lat": "-6.94770740",
      "lng": "108.12613780",
      "photos": "[\"\\/uploads\\/posts\\/231012-3899-382942372.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  },
  {
      "nip_reporter": "196806212009011001",
      "nm_reporter": "Aca sukarsa",
      "tgl_lapor": "2023-10-12 12:02:26",
      "tgl_kunjungan": "2023-10-12",
      "nm_prov": "JAWA BARAT",
      "nm_kab": "SUMEDANG",
      "nm_kec": "JATINUNGGAL",
      "nm_desa": "TARIKOLOT",
      "jenis_tanaman_pangan": "Padi",
      "nm_varietas": "Inpari IR Nutrizinc",
      "kategori_pengelola": "Kelompok Tani",
      "nama_pengelola": "Pintu Air",
      "luas": "20.00",
      "perkiraan": "7.55",
      "lat": "-6.94769280",
      "lng": "108.12613670",
      "photos": "[\"\\/uploads\\/posts\\/231012-3899-507712381.jpg\"]",
      "nm_verifikator": null,
      "status": "Pending"
  }
  ];
  constructor() {}

  ngOnInit(): void {
    const iconDefault = L.icon({
      iconUrl: "assets/images/leaflet/marker-icon.png",
      iconRetinaUrl: "assets/images/leaflet/marker-icon.png",
      shadowUrl: "assets/images/leaflet/marker-shadow.png"
    });

    const map = L.map("map").setView([-7.0495197, 107.7615982], 9);
    L.Marker.prototype.options.icon = iconDefault;

    L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: "&copy; <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors"
    }).addTo(map);

      this.jsonData.forEach(item => {
        const popupContent = `
        <b>Tanggal Lapor:</b> ${item.tgl_lapor}<br>
        <b>Tanggal Kunjungan:</b> ${item.tgl_kunjungan}<br>
        <b>Provinsi:</b> ${item.nm_prov}<br>
        <b>Kabupaten:</b> ${item.nm_kab}<br>
        <b>Kecamatan:</b> ${item.nm_kec}<br>
        <b>Desa:</b> ${item.nm_desa}<br>
        <b>Jenis Tanaman Pangan:</b> ${item.jenis_tanaman_pangan}<br>
        <b>Varietas:</b> ${item.nm_varietas}<br>
        <b>Kategori Pengelola:</b> ${item.kategori_pengelola}<br>
        <b>Nama Pengelola:</b> ${item.nama_pengelola}<br>
        <b>Luas:</b> ${item.luas}<br>
        <b>Perkiraan:</b> ${item.perkiraan}<br>
        <b>Status:</b> ${item.status}
        `;
        const latitude = parseFloat(item.lat);
        const longitude = parseFloat(item.lng);
  
        L.marker([latitude, longitude])
          .addTo(map)
          .bindPopup(popupContent)
          .openPopup();
      });

  }
}
